<main ng-controller="MyProfileCtrl">
    <header class="pure-g" ng-include="'/resources/partials/header.html'"></header>
    <div class="w-container">
        <tt-error-messages></tt-error-messages>
        <tt-success-messages></tt-success-messages>
        <div class="w-row">
            <div class="w-col w-col-6">
                <div class="profile-image-container">
                    <img class="profile-image" no-cache-src="{{user.profileImage}}" ng-hide="user.registrationType=='FACEBOOK'" />
                    <img class="profile-image" src="{{user.profileImage}}" ng-show="user.registrationType=='FACEBOOK'" />
                </div>
                <div class="w-col w-col-4 col-md-offset-2">
                    <label class="btn btn-block btn-primary">
                        {{ 'profile.change-profile-picture' | translate }}&hellip; <input type="file" custom-on-change="uploadFile" style="display: none;">
                    </label>
                </div>
                <div class="w-col w-col-3 col-md-offset-1">
                    <button class="btn btn-default" ng-click="removePicture();">{{ 'profile.remove-picture' | translate }}</button>
                </div>
            </div>
            <div class="w-col w-col-6 personal-data-container">
                <div class="w-row">
                    <div class="w-col w-col-12">
                        <h2>{{ 'profile.my-profile' | translate }}</h2>
                    </div>
                    <div class="w-col w-col-12" ng-show="user.registrationType=='PLAIN'">
                        <b>{{ 'profile.username' | translate }}:</b> {{user.userName}}
                    </div>
                    <div class="w-col w-col-12">
                        <b>{{ 'profile.username' | translate }}:</b> {{user.name}} {{user.surname}}
                    </div>
                    <div class="w-col w-col-12" ng-show="user.phone">
                        <b>{{ 'profile.phone' | translate }}:</b> {{user.phone}}
                    </div>
                    <div class="w-col w-col-12" ng-show="user.birthday">
                        <b>{{ 'profile.birthday' | translate }}:</b> {{user.birthday}}
                    </div>
                    <div class="w-col w-col-12" ng-hide="user.registrationType=='DRAUGIEM'">
                        <b>{{ 'profile.email' | translate }}:</b> {{user.email}}
                    </div>
                    <div class="w-col w-col-12" ng-show="user.car">
                        <b>{{ 'profile.car' | translate }}:</b> {{user.car}}, {{user.carRegNumber}}
                    </div>
                    <div class="w-col w-col-4" style="display: inline-flex;">
                        <form action="/edit-profile">
                            <button type="submit" class="btn btn-primary">{{ 'profile.edit' | translate }}</button>
                        </form>
                        <form action="/change-password" style="margin-left: 10px;">
                            <button type="submit" class="btn btn-primary">{{ 'profile.change-password' | translate }}</button>
                        </form>
                    </div>
                    <div class="w-col w-col-3" ng-show="user.registrationType=='PLAIN'">

                    </div>
                </div>
            </div>
        </div>
        <div class="w-row">
            <div class="center-text large-font">
                {{ 'profile.my-rides' | translate }}
            </div>
        </div>
        <div class="w-row">
            <div class="col-sm-12">
                <div class="alert alert-info" role="alert" ng-hide="myRides.length > 0">
                    {{ 'profile.no-rides' | translate }}.
                </div>
                <table id="example" class="my-rides table-striped" data-tablesaw-mode="stack" ng-show="myRides.length > 0">
                    <thead>
                    <tr>
                        <th scope="col" data-tablesaw-sortable-col data-tablesaw-priority="persist">{{ 'profile.date' | translate }}</th>
                        <th scope="col" data-tablesaw-sortable-col data-tablesaw-sortable-default-col data-tablesaw-priority="3">{{ 'profile.from' | translate }}</th>
                        <th scope="col" data-tablesaw-sortable-col data-tablesaw-priority="2">{{ 'profile.to' | translate }}</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr ng-repeat="ride in myRides">
                        <td class="title">
                            {{ride.departureTime}}
                        </td>
                        <td>{{ride.driveFrom}}, {{ride.fromAddress}}</td>
                        <td>{{ride.driveTo}}, {{ride.toAddress}}</td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</main>
<div ng-include="'/resources/partials/footer.html'"></div>