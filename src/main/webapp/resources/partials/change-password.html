<main ng-controller="ChangePasswordCtrl">
    <header class="pure-g" ng-include="'/resources/partials/header.html'"></header>
    <div class="w-container">
        <tt-error-messages></tt-error-messages>
        <tt-success-messages></tt-success-messages>
        <div class="w-form">
            <form id="form" name="form" class="pure-form login-form" role="form" ng-submit="form.$valid && changePassword()">
                <fieldset class="pure-group">
                    <div class="col-md-4 col-md-offset-4">
                        <label for="oldPassword" class="control-label">{{ 'change-password.old-password' | translate }}</label>
                        <div class="form-group">
                            <input id="oldPassword" type="password" ng-model="oldPassword"
                                   name="oldPassword" class="form-control" required>
                        </div>
                    </div>
                    <div class="col-md-4 col-md-offset-4">
                        <div class="form-group" show-errors='{showSuccess: true}'>
                            <label for="newPassword" class="control-label">{{ 'change-password.new-password' | translate }}</label>
                            <input id="newPassword" type="password" ng-model="newPassword"
                                   name="newPassword" class="form-control" ng-minlength="5" required>
                            <p class="help-block" ng-if="form.newPassword.$error.required">{{ 'change-password.password-is-mandatory' | translate }}</p>
                            <p class="help-block" ng-if="form.newPassword.$error.minlength">{{ 'change-password.minlength' | translate }}</p>
                        </div>
                    </div>
                    <div class="col-md-4 col-md-offset-4">
                        <div class="form-group" show-errors='{showSuccess: true}'>
                            <label for="newPasswordRepeat" class="control-label">{{ 'change-password.repeat-new-password' | translate }}</label>
                            <input id="newPasswordRepeat" type="password" ng-model="newPasswordRepeat" wj-validation-error="newPassword != newPasswordRepeat ? 'Passwords don\'t match' : ''"
                                   name="newPasswordRepeat" class="form-control" ng-minlength="5" required>
                            <p class="help-block" ng-if="form.newPasswordRepeat.$error.required">{{ 'change-password.password-is-mandatory' | translate }}</p>
                            <p class="help-block" ng-if="form.newPasswordRepeat.$error.minlength">{{ 'change-password.minlength' | translate }}</p>
                            <p class="help-block" ng-if="form.newPasswordRepeat.$error.wjValidationError">{{ 'change-password.passwords-dont-match' | translate }}</p>
                        </div>
                    </div>
                </fieldset>
                <div class="col-md-4 col-md-offset-4">
                    <button type="submit" class="btn btn-primary offer-ride-button">{{ 'change-password.change-password' | translate }}</button>
                    <button type="button" class="btn" ng-click="cancel()">{{ 'change-password.cancel' | translate }}</button>
                </div>
            </form>
        </div>
    </div>
</main>
<div ng-include="'/resources/partials/footer.html'"></div>